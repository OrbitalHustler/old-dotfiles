{{- $minimal := false -}}
{{- $headless := false -}}
{{- $secrets := true -}}
{{- $default_user := true -}}
{{- $workconf := false -}}

{{- if (env "DEFAULT_USER_OFF") -}}
{{- $name := "user_name" -}}
{{- $email := "user_email" -}}
{{- $gpg_keyid := "user_gpg_keyid" -}}
{{- $github_user := "github_user" -}}
{{- else }}
{{- $name := "Mathieu Merino" -}}
{{- $email := "mmerino@outlook.fr" -}}
{{- $gpg_keyid := "0x7357E344D6C3C795" -}}
{{- $github_user := "Percee" -}}
{{- end -}}

{{- if (env "HEADLESS") -}}
{{- $headless = true -}}
{{- end -}}

{{- if (env "SECRETS_OFF") -}}
{{- $secrets = false -}}
{{- end -}}

{{- if (env "DOTFILES_MINIMAL") -}}
{{- $minimal = true -}}
{{- $secrets = false -}}
{{- end }}

{{- if (env "WORKCONF") -}}
{{- $workconf = true -}}
{{- end -}}

{{- if (env "ASK") }}
{{- $minimal = promptBool "minimal" -}}
{{- $workconf = promptBool "work config" -}}
{{- if $minimal -}}
{{- $secrets = false -}}
{{- else }}
{{- $secrets = promptBool "secrets" -}}
{{- end }}
{{- $name := promptString "full name" -}}
{{- $email := promptString "personal email" -}}
{{- end }}

encryption: gpg
gpg:
  symmetric: true

data:
  secrets: {{ $secrets }}
  headless: {{ $headless }}
  minimal: {{ $minimal }}
  name: {{ $name }}
  email: {{ $email }}
  gpg_keyid: {{ $gpg_keyid }}
  github_user: {{ $github_user }}
  workconf: {{ $workconf }}
{{- if $secrets }}
  bitwarden:
    ssh_key: 9c017493-34b1-475d-a0b6-adda003f870b
    pgp_priv_signing: 573e99de-3b95-4fb4-afa4-ade600648bd4
    pgp_priv_encrypt: a6960156-86bc-4e4e-8179-ade600607808
    pgp_priv_authenticate: 03526945-8e85-4081-aa7a-ade600606d83
{{- end -}}

